# useEffect ì™„ë²½ ê°€ì´ë“œ ìš”ì•½ë³¸

> í•´ë‹¹ ê¸€ì€ ë°‘ì˜ ë§í¬ì˜ ì‚¬ì´íŠ¸ë¥¼ ìš”ì•½í•œ ê¸€ì…ë‹ˆë‹¤. </br> [[ë²ˆì—­] useEffect ì™„ë²½ ê°€ì´ë“œ](https://www.rinae.dev/posts/a-complete-guide-to-useeffect-ko)

### ëª¨ë“  ëœë”ë§ì€ ê³ ìœ ì˜ propê³¼ stateê°€ ìˆë‹¤

```jsx
// ì²˜ìŒ ëœë”ë§ ì‹œ
function Counter() {
  const count = 0; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  <p>You clicked {count} times</p>;
  // ...
}
// í´ë¦­í•˜ë©´ í•¨ìˆ˜ê°€ ë‹¤ì‹œ í˜¸ì¶œëœë‹¤
function Counter() {
  const count = 1; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  <p>You clicked {count} times</p>;
  // ...
}
// ë˜ í•œë²ˆ í´ë¦­í•˜ë©´, ë‹¤ì‹œ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤
function Counter() {
  const count = 2; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  <p>You clicked {count} times</p>;
  // ...
}
```

stateë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œë§ˆë‹¤, ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

ë§¤ ë Œë” ê²°ê³¼ë¬¼ì€ ê³ ìœ ì˜ `counter` ìƒíƒœê°’ì„ â€œì‚´í´ë´…ë‹ˆë‹¤.â€ ì´ ê°’ì„ í•¨ìˆ˜ ì•ˆì— **ìƒìˆ˜**ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤.

`setCount`Â ë¥¼ í˜¸ì¶œí•  ë•Œ, ë¦¬ì•¡íŠ¸ëŠ” ë‹¤ë¥¸Â `count`Â ê°’ê³¼ í•¨ê»˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ë¦¬ì•¡íŠ¸ëŠ” ê°€ì¥ ìµœì‹ ì˜ ëœë”ë§ ê²°ê³¼ë¬¼ê³¼ ì¼ì¹˜í•˜ë„ë¡ DOMì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤.

ëª…ì‹¬í•˜ì…”ì•¼ í•  ì ì€ ì—¬ëŠ íŠ¹ì • ëœë”ë§ ì‹œ ê·¸ ì•ˆì— ìˆëŠ”Â `count`Â ìƒìˆ˜ëŠ” ì‹œê°„ì´ ì§€ë‚œë‹¤ê³  ë°”ë€ŒëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ í˜¸ì¶œë˜ê³ , **ê°ê°ì˜ ëœë”ë§ë§ˆë‹¤ ê²©ë¦¬ëœ ê³ ìœ ì˜Â `count`Â ê°’ì„ â€œë³´ëŠ”â€ ê²ƒì…ë‹ˆë‹¤.**


> ğŸ”¥ ìš°ë¦¬ì˜ í•¨ìˆ˜ëŠ” ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë˜ì§€ë§Œ(ëœë”ë§ë§ˆë‹¤ í•œ ë²ˆì”©), ê°ê°ì˜ ëœë”ë§ì—ì„œ í•¨ìˆ˜ ì•ˆì˜Â `count`Â ê°’ì€ ìƒìˆ˜ì´ì **ë…ë¦½ì ì¸ ê°’(íŠ¹ì • ëœë”ë§ ì‹œì˜ ìƒíƒœ)ìœ¼ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤.**

### ëª¨ë“  ëœë”ë§ì€ ê³ ìœ ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì§„ë‹¤

```jsx
// ì²˜ìŒ ëœë”ë§ ì‹œ
function Counter() {
  const count = 0; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + count);
    }, 3000);
  }
  // ...
}
// í´ë¦­í•˜ë©´ í•¨ìˆ˜ê°€ ë‹¤ì‹œ í˜¸ì¶œëœë‹¤
function Counter() {
  const count = 1; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + count);
    }, 3000);
  }
  // ...
}
// ë˜ í•œë²ˆ í´ë¦­í•˜ë©´, ë‹¤ì‹œ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤
function Counter() {
  const count = 2; // useState() ë¡œë¶€í„° ë¦¬í„´
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + count);
    }, 3000);
  }
  // ...
}
```

```jsx
// ì²˜ìŒ ëœë”ë§ ì‹œ
function Counter() {
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + 0);
    }, 3000);
  }
  // ...
  <button onClick={handleAlertClick} />; // 0ì´ ì•ˆì— ë“¤ì–´ìˆìŒ
  // ...
}
// í´ë¦­í•˜ë©´ í•¨ìˆ˜ê°€ ë‹¤ì‹œ í˜¸ì¶œëœë‹¤
function Counter() {
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + 1);
    }, 3000);
  }
  // ...
  <button onClick={handleAlertClick} />; // 1ì´ ì•ˆì— ë“¤ì–´ìˆìŒ
  // ...
}
// ë˜ í•œë²ˆ í´ë¦­í•˜ë©´, ë‹¤ì‹œ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤
function Counter() {
  // ...
  function handleAlertClick() {
    setTimeout(() => {
      alert("You clicked on: " + 2);
    }, 3000);
  }
  // ...
  <button onClick={handleAlertClick} />; // 2ê°€ ì•ˆì— ë“¤ì–´ìˆìŒ
  // ...
}
```

â†’ ê°ê°ì˜ ëœë”ë§ì€ ê³ ìœ í•œ â€œë²„ì „â€ì˜Â `handleAlertClick`Â ì„ ë¦¬í„´í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê°ê°ì˜ ë²„ì „ì€ ê³ ìœ ì˜Â `count`Â ë¥¼ â€œê¸°ì–µí•©ë‹ˆë‹¤â€.

â†’ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ íŠ¹ì • ëœë”ë§ì— **â€œì†í•´ ìˆìœ¼ë©°â€,** ì–¼ëŸ¿ í‘œì‹œ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œ í•´ë‹¹ ëœë”ë§ ì‹œì ì˜ `counter` stateë¥¼ ìœ ì§€í•œì±„ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤!

### ëª¨ë“  ëœë”ë§ì€ ê³ ìœ ì˜ ì´í™íŠ¸ë¥¼ ê°€ì§„ë‹¤

ìš°ë¦¬ëŠ” ì´ë¯¸Â `count`Â ëŠ” íŠ¹ì • ì»´í¬ë„ŒíŠ¸ ëœë”ë§ì— í¬í•¨ë˜ëŠ” ìƒìˆ˜ë¼ê³  ë°°ì› ìŠµë‹ˆë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ê·¸ ëœë”ë§ì— â€œì†í•œâ€Â `count`Â ìƒíƒœë¥¼ â€œë´…ë‹ˆë‹¤â€.Â `count`Â ëŠ” íŠ¹ì • ë²”ìœ„ ì•ˆì— ì†í•˜ëŠ” ë³€ìˆ˜ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´í™íŠ¸ì—ë„ ë˜‘ê°™ì€ ê°œë…ì´ ì ìš©ë©ë‹ˆë‹¤!

**â€œë³€í™”í•˜ì§€ ì•ŠëŠ”â€ ì´í™íŠ¸ ì•ˆì—ì„œÂ `count`Â ë³€ìˆ˜ê°€ ì„ì˜ë¡œ ë°”ë€ë‹¤ëŠ” ëœ»ì´ ì•„ë‹™ë‹ˆë‹¤.Â *ì´í™íŠ¸ í•¨ìˆ˜ ìì²´ê°€*Â ë§¤ ëœë”ë§ë§ˆë‹¤ ë³„ë„ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤.**

ê°ê°ì˜ ì´í™íŠ¸ ë²„ì „ì€ ë§¤ë²ˆ ëœë”ë§ì— â€œì†í•œâ€Â `count`Â ê°’ì„ â€œë´…ë‹ˆë‹¤â€.

```jsx
// ìµœì´ˆ ëœë”ë§ ì‹œ
function Counter() {
  // ...
  useEffect(
    // ì²« ë²ˆì§¸ ëœë”ë§ì˜ ì´í™íŠ¸ í•¨ìˆ˜
    () => {
      document.title = `You clicked ${0} times`;
    }
  );
  // ...
}
// í´ë¦­í•˜ë©´ í•¨ìˆ˜ê°€ ë‹¤ì‹œ í˜¸ì¶œëœë‹¤
function Counter() {
  // ...
  useEffect(
    // ë‘ ë²ˆì§¸ ëœë”ë§ì˜ ì´í™íŠ¸ í•¨ìˆ˜
    () => {
      document.title = `You clicked ${1} times`;
    }
  );
  // ...
}
// ë˜ í•œë²ˆ í´ë¦­í•˜ë©´, ë‹¤ì‹œ í•¨ìˆ˜ê°€ í˜¸ì¶œëœë‹¤
function Counter() {
  // ...
  useEffect(
    // ì„¸ ë²ˆì§¸ ëœë”ë§ì˜ ì´í™íŠ¸ í•¨ìˆ˜
    () => {
      document.title = `You clicked ${2} times`;
    }
  );
  // ..
}
```

**<ëœë”ë§ ê³¼ì •>**

1. **ì²«ë²ˆì§¸ ë Œë”ë§**
   - ë¦¬ì•¡íŠ¸: stateê°€Â `0`Â ì¼ ë•Œì˜ UIë¥¼ ë³´ì—¬ì¤˜.
   - ì»´í¬ë„ŒíŠ¸
     - ì—¬ê¸° ëœë”ë§ ê²°ê³¼ë¬¼ë¡œÂ `<p>You clicked 0 times</p>`Â ê°€ ìˆì–´.
     - ê·¸ë¦¬ê³  ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ê³  ì´ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆ:Â `() => { document.title = 'You clicked 0 times' }`.
   - ë¦¬ì•¡íŠ¸: ì¢‹ì•„. UIë¥¼ ì—…ë°ì´íŠ¸ í•˜ê² ì–´. ì´ë´ ë¸Œë¼ìš°ì €, ë‚˜ DOMì— ë­˜ ì¢€ ì¶”ê°€í•˜ë ¤ê³  í•´.
   - ë¸Œë¼ìš°ì €: ì¢‹ì•„, í™”ë©´ì— ê·¸ë ¤ì¤„ê²Œ.
   - ë¦¬ì•¡íŠ¸: ì¢‹ì•„ ì´ì œ ì»´í¬ë„ŒíŠ¸ ë„¤ê°€ ì¤€ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í• ê±°ì•¼.
     - `() => { document.title = 'You clicked 0 times' }`Â ë¥¼ ì‹¤í–‰í•˜ëŠ” ì¤‘.
2. **ë²„íŠ¼ í´ë¦­ ì‹œ**
   - ì»´í¬ë„ŒíŠ¸: ì´ë´ ë¦¬ì•¡íŠ¸, ë‚´ ìƒíƒœë¥¼Â `1`Â ë¡œ ë³€ê²½í•´ì¤˜.
   - ë¦¬ì•¡íŠ¸: ìƒíƒœê°€Â `1`Â ì¼ë•Œì˜ UIë¥¼ ì¤˜.
   - ì»´í¬ë„ŒíŠ¸
     - ì—¬ê¸° ëœë”ë§ ê²°ê³¼ë¬¼ë¡œÂ `<p>You clicked 1 times</p>`Â ê°€ ìˆì–´.
     - ê·¸ë¦¬ê³  ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ê³  ì´ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìŠì§€ ë§ˆ:Â `() => { document.title = 'You clicked 1 times' }`.
   - ë¦¬ì•¡íŠ¸: ì¢‹ì•„. UIë¥¼ ì—…ë°ì´íŠ¸ í•˜ê² ì–´. ì´ë´ ë¸Œë¼ìš°ì €, ë‚˜ DOMì— ë­˜ ì¢€ ì¶”ê°€í•˜ë ¤ê³  í•´.
   - ë¸Œë¼ìš°ì €: ì¢‹ì•„, í™”ë©´ì— ê·¸ë ¤ì¤„ê²Œ.
   - ë¦¬ì•¡íŠ¸: ì¢‹ì•„ ì´ì œ ì»´í¬ë„ŒíŠ¸ ë„¤ê°€ ì¤€ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í• ê±°ì•¼.
     - `() => { document.title = 'You clicked 1 times' }`Â ë¥¼ ì‹¤í–‰í•˜ëŠ” ì¤‘.

### ëª¨ë“  ëœë”ë§ì€ ê³ ìœ ì˜ â€¦ ëª¨ë“  ê²ƒì„ ê°€ì§€ê³  ìˆë‹¤

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  useEffect(() => {
    setTimeout(() => {
      console.log(`You clicked ${count} times`);
    }, 3000);
  });
  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
```

P: í•´ë‹¹ ì½”ë“œì—ì„œ ì•½ê°„ ëœ¸ì„ ë“¤ì´ë©° ë²„íŠ¼ì„ ì—¬ëŸ¬ë²ˆ ëˆ„ë¥¸ë‹¤ë©´?

Q: ìˆœì„œëŒ€ë¡œ 1, 2, 3, 4, 5 ë‚˜ì˜´!

ì™œëƒí•˜ë©´, ê°ê°ì˜ íƒ€ì´ë¨¸ëŠ” íŠ¹ì • ëœë”ë§ì— ì†í•˜ê¸° ë•Œë¬¸ì— ê·¸ ì‹œì ì˜ `count` ê°’ì„ ê°–ê¸° ë•Œë¬¸ì—

**â•Â í”ŒëŸ¬ìŠ¤ ì•ŒíŒŒ ì •ë³´**

ì›ë˜ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ë©´ ì´ë ‡ê²Œ ì‘ë™í•˜ì§€ ì•ŠìŒ

```jsx
componentDidUpdate() {
  setTimeout(() => {
     console.log(`You clicked ${this.state.count} times`);
  }, 3000);
}
```

â†’ íŠ¹ì • ëœë”ë§ ì‹œì ì˜ ê°’ì´ ì•„ë‹ˆë¼ ì–¸ì œë‚˜ ìµœì‹ ì˜ ê°’ì„ ê°€ë¦¬í‚¤ê²Œ ë¨

â†’ ë§¤ë²ˆ 5ê°€ ì°í˜€ìˆëŠ” ë¡œê·¸ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŒ

í›…ì€ í´ë¡œì €ì— ì˜ì¡´í•˜ê³  ìˆëŠ”ë°, í´ë¡œì €ëŠ” ì ‘ê·¼í•˜ë ¤ëŠ” ê°’ì´ ì ˆëŒ€ ë°”ë€Œì§€ ì•Šì„ ë•Œ ìœ ìš©í•¨. ë°˜ë“œì‹œ ìƒìˆ˜ë¥¼ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ìƒê°ì„ í•˜ê¸° ì‰½ë„ë¡ ë§Œë“¤ì–´ì¤Œ

### íë¦„ì„ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ê¸°


> ğŸ”¥ ì»´í¬ë„ŒíŠ¸ì˜ ëœë”ë§ ì•ˆì— ìˆëŠ”Â **ëª¨ë“ **Â í•¨ìˆ˜ëŠ” (ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, ì´í™íŠ¸, íƒ€ì„ì•„ì›ƒì´ë‚˜ ê·¸ ì•ˆì—ì„œ í˜¸ì¶œë˜ëŠ” API ë“±) ëœë”(render)ê°€ í˜¸ì¶œë  ë•Œ ì •ì˜ëœ propsì™€ state ê°’ì„ ì¡ì•„ë‘”ë‹¤.



- â•Â ë¬¼ë¡  ë•Œë•Œë•Œë¡œ ì´í™íŠ¸ ì•ˆì— ì •ì˜í•´ë‘” ì½œë°±ì—ì„œ ì‚¬ì „ì— ì¡ì•„ë‘” ê°’ì´ ì•„ë‹ˆë¼ ìµœì‹ ì˜ ê°’ì„ ì´ìš©í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆìŒ
  ê·¸ëŸ´ ë•ŒëŠ” ref ì‚¬ìš©í•˜ë©´ ë¨!
  ```jsx
  function Example() {
    const [count, setCount] = useState(0);
    const latestCount = useRef(count);
    useEffect(() => {
      // ë³€ê²½ ê°€ëŠ¥í•œ ê°’ì„ ìµœì‹ ìœ¼ë¡œ ì„¤ì •í•œë‹¤
      latestCount.current = count;
      setTimeout(() => {
        // ë³€ê²½ ê°€ëŠ¥í•œ ìµœì‹ ì˜ ê°’ì„ ì½ì–´ ë“¤ì¸ë‹¤
        console.log(`You clicked ${latestCount.current} times`);
      }, 3000);
    });
  ```
  ì˜ëª»ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ â€œëœ ê¹¨ë—â€í•´ë³´ì¼ ìˆ˜ëŠ” ìˆìŒ!
  â‡’ `this.state`ê°€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ìœ„ì™€ ê°™ì€ ë°©ì‹ì„

### ê·¸ëŸ¬ë©´ í´ë¦°ì—…ì€ ë­ì§€?

ì–´ë–¤ ì´í™íŠ¸ëŠ” í´ë¦°ì—… ë‹¨ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ í´ë¦°ì—…ì˜ ëª©ì ì€ êµ¬ë…ê³¼ ê°™ì€ ì´í™íŠ¸ë¥¼ â€œë˜ëŒë¦¬ëŠ”â€ ê²ƒì…ë‹ˆë‹¤.

```jsx
useEffect(() => {
  ChatAPI.subscribeToFriendStatus(props.id, handleStatusChange);
  return () => {
    ChatAPI.unsubscribeFromFriendStatus(props.id, handleStatusChange);
  };
});
```

ì²« ë²ˆì§¸ ëœë”ë§ì—ì„œÂ `prop`Â ì´Â `{id: 10}`Â ì´ê³ , ë‘ ë²ˆì§¸ ëœë”ë§ì—ì„œÂ `{id: 20}`Â ì´ë¼ê³  í•´ ë´…ì‹œë‹¤.Â *ì•„ë§ˆë„*Â ì•„ë˜ì™€ ê°™ì€ íë¦„ëŒ€ë¡œ í˜ëŸ¬ê°€ë¦¬ë¼ ìƒê°í•˜ì‹¤ê²ë‹ˆë‹¤.

- ë¦¬ì•¡íŠ¸ê°€Â `{id: 10}`Â ì„ ë‹¤ë£¨ëŠ” ì´í™íŠ¸ë¥¼ í´ë¦°ì—…í•œë‹¤.
- ë¦¬ì•¡íŠ¸ê°€Â `{id: 20}`Â ì„ ê°€ì§€ê³  UIë¥¼ ëœë”ë§í•œë‹¤.
- ë¦¬ì•¡íŠ¸ê°€Â `{id: 20}`Â ìœ¼ë¡œ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.

(ì‹¤ì œëŠ” ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤)

ìœ„ì˜ ë©˜íƒˆ ëª¨ë¸ëŒ€ë¡œë¼ë©´, í´ë¦°ì—…ì´ ë¦¬ëœë”ë§ ë˜ê¸° ì „ì— ì‹¤í–‰ë˜ê³  ì´ì „ì˜ propì„ â€œë³´ê³ â€, ê·¸ ë‹¤ìŒ ìƒˆ ì´í™íŠ¸ê°€ ë¦¬ëœë”ë§ ì´í›„ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìƒˆ propì„ â€œë³¸ë‹¤ê³ â€ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë©˜íƒˆ ëª¨ë¸ì€ í´ë˜ìŠ¤ì˜ ë¼ì´í”„ì‚¬ì´í´ì„ ê·¸ëŒ€ë¡œ ì˜®ê²¨ ë†“ì€ ê²ƒê³¼ ê°™ê³ , ì—¬ê¸°ì„œëŠ” ì˜ëª»ëœ ë‚´ìš©ì…ë‹ˆë‹¤. ì™œ ê·¸ëŸ°ì§€ ì•Œì•„ë´…ì‹œë‹¤.

ë¦¬ì•¡íŠ¸ëŠ”Â ë¸Œë¼ìš°ì €ê°€ í˜ì¸íŠ¸ í•˜ê³  ë‚œ ë’¤ì—ì•¼Â ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ì—¬ ëŒ€ë¶€ë¶„ì˜ ì´í™íŠ¸ê°€ ìŠ¤í¬ë¦° ì—…ë°ì´íŠ¸ë¥¼ ê°€ë¡œë§‰ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•±ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ì´í™íŠ¸ì˜ í´ë¦°ì—…ë„ ë¯¸ë¤„ì§‘ë‹ˆë‹¤.Â **ì´ì „ ì´í™íŠ¸ëŠ” ìƒˆ propê³¼ í•¨ê»˜ ë¦¬ëœë”ë§ ë˜ê³  ë‚œÂ *ë’¤ì—*Â í´ë¦°ì—…ë©ë‹ˆë‹¤.**

- ë¦¬ì•¡íŠ¸ê°€Â `{id: 20}`Â ì„ ê°€ì§€ê³  UIë¥¼ ëœë”ë§í•œë‹¤.
- ë¸Œë¼ìš°ì €ê°€ ì‹¤ì œ ê·¸ë¦¬ê¸°ë¥¼ í•œë‹¤. í™”ë©´ ìƒì—ì„œÂ `{id: 20}`Â ì´ ë°˜ì˜ëœ UIë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.
- ë¦¬ì•¡íŠ¸ëŠ”Â `{id: 10}`Â ì— ëŒ€í•œ ì´í™íŠ¸ë¥¼ í´ë¦°ì—…í•œë‹¤.
- ë¦¬ì•¡íŠ¸ê°€Â `{id: 20}`Â ì— ëŒ€í•œ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.

ì´ìƒí•˜ê²Œ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì–´ë–»ê²Œ propì´Â `{id: 20}`Â ìœ¼ë¡œ ë°”ë€Œê³  ë‚˜ì„œë„ ì´ì „ ì´í™íŠ¸ì˜ í´ë¦°ì—…ì´ ì—¬ì „íˆ ì˜ˆì „ ê°’ì¸Â `{id: 10}`Â ì„ â€œë³´ëŠ”â€ ê±¸ê¹Œìš”?

ì´ì œ ë‹µì´ ëª…í™•í•´ì¡Œë„¤ìš”! ì–´ì°Œë˜ì—ˆê±´ ì´í™íŠ¸ì˜ í´ë¦°ì—…ì€ â€œìµœì‹ â€ propì„ ì½ì§€ ì•ŠìŠµë‹ˆë‹¤. í´ë¦°ì—…ì´ ì •ì˜ëœ ì‹œì ì˜ ëœë”ë§ì— ìˆë˜ ê°’ì„ ì½ëŠ” ê²ƒì…ë‹ˆë‹¤.

```jsx
// ì²« ë²ˆì§¸ ëœë”ë§, propsëŠ” {id: 10}
function Example() {
  // ...
  useEffect(
    // ì²« ë²ˆì§¸ ëœë”ë§ì˜ ì´í™íŠ¸
    () => {
      ChatAPI.subscribeToFriendStatus(10, handleStatusChange);
      // ì²« ë²ˆì§¸ ëœë”ë§ì˜ í´ë¦°ì—…
      return () => {
        ChatAPI.unsubscribeFromFriendStatus(10, handleStatusChange);
      };
    }
  );
  // ...
}
// ë‹¤ìŒ ëœë”ë§, propsëŠ” {id: 20}
function Example() {
  // ...
  useEffect(
    // ë‘ ë²ˆì§¸ ëœë”ë§ì˜ ì´í™íŠ¸
    () => {
      ChatAPI.subscribeToFriendStatus(20, handleStatusChange);
      // ë‘ ë²ˆì§¸ ëœë”ë§ì˜ í´ë¦°ì—…
      return () => {
        ChatAPI.unsubscribeFromFriendStatus(20, handleStatusChange);
      };
    }
  );
  // ...
}
```

â†’ ì²« ë²ˆì§¸ ëœë”ë§ì˜ í´ë¦°ì—…ì´ ë°”ë¼ë³´ëŠ” ê°’ì„Â `{id: 10}`Â ì´ì™¸ì˜ ê²ƒìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ ë¦¬ì•¡íŠ¸ëŠ” í˜ì¸íŒ… ì´í›„ ì´í™íŠ¸ë¥¼ ë‹¤ë£¨ëŠ”ê²Œ ê¸°ë³¸ì´ë©° ê·¸ ê²°ê³¼ ì•±ì„ ë¹ ë¥´ê²Œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ì´ì „ propsëŠ” ìš°ë¦¬ì˜ ì½”ë“œê°€ ì›í•œë‹¤ë©´ ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤.\*\*\*\*

### ë¼ì´í”„ì‚¬ì´í´ì´ ì•„ë‹ˆë¼ ë™ê¸°í™”


> ğŸ”¥ **ëª¨ë“  ê²ƒì€ ëª©ì ì§€ì— ë‹¬ë ¸ì§€ ì—¬ì •ì— ë‹¬ë¦°ê²Œ ì•„ë‹ˆë‹¤.**



**ë¦¬ì•¡íŠ¸ëŠ” ìš°ë¦¬ê°€ ì§€ì •í•œ propsì™€ stateì— ë”°ë¼ DOMê³¼ ë™ê¸°í™”í•©ë‹ˆë‹¤.**ëœë”ë§ ì‹œ â€œë§ˆìš´íŠ¸â€ ì™€ â€œì—…ë°ì´íŠ¸â€ ì˜ êµ¬ë¶„ì´ ì—†ìŠµë‹ˆë‹¤.

`useEffect`Â ëŠ” ë¦¬ì•¡íŠ¸ íŠ¸ë¦¬ ë°”ê¹¥ì— ìˆëŠ” ê²ƒë“¤ì„ propsì™€ stateì— ë”°ë¼Â *ë™ê¸°í™”*Â í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

```jsx
function Greeting({ name }) {
  useEffect(() => {
    document.title = "Hello, " + name;
  });
  return <h1 className="Greeting">Hello, {name}</h1>;
}
```

â†’ **ë§Œì•½ ì»´í¬ë„ŒíŠ¸ê°€ ì²« ë²ˆì§¸ë¡œ ëœë”ë§í•  ë•Œì™€ ê·¸ í›„ì— ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ì´í™íŠ¸ë¥¼ ì‘ì„±í•˜ë ¤ê³  í•˜ì‹ ë‹¤ë©´, íë¦„ì„ ê±°ìŠ¤ë¥´ëŠ” ê²ƒì…ë‹ˆë‹¤!**Â ëœë”ë§ ê²°ê³¼ë¬¼ì´ â€œëª©ì ì§€â€ ì— ë”°ë¼ê°€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ â€œì—¬ì •â€ ì— ë”°ë¥¸ë‹¤ë©´ ë™ê¸°í™”ì— ì‹¤íŒ¨í•©ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ë¥¼ prop A, B, C ìˆœì„œë¡œ ëœë”ë§í•˜ë˜ì§€, ë°”ë¡œ Cë¡œ ëœë”ë§í•˜ë˜ì§€ ë³„ë¡œ ì‹ ê²½ì“°ì´ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. ì ê¹ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆì§€ë§Œ(ì˜ˆ: ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ), ê²°êµ­ ë§ˆì§€ë§‰ ê²°ê³¼ë¬¼ì€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤.

ë‹¹ì—°í•˜ì§€ë§Œ ì—¬ì „íˆ ëª¨ë“  ì´í™íŠ¸ë¥¼Â *ë§¤ë²ˆ*Â ëœë”ë§ë§ˆë‹¤ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ íš¨ìœ¨ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ê·¸ë¦¬ê³  ì–´ë–¤ ê²½ìš°ì—ëŠ” ë¬´í•œë£¨í”„ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆì§€ìš”.)

### ë¦¬ì•¡íŠ¸ì—ê²Œ ì´í™íŠ¸ë¥¼ ë¹„êµí•˜ëŠ” ë²•ì„ ê°€ë¥´ì¹˜ê¸°

Reactì—ì„œ ë§¤ë²ˆì˜ ë¦¬ëœë”ë§ë§ˆë‹¤ DOM ì „ì²´ë¥¼ ìƒˆë¡œ ê·¸ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œë¡œ ë°”ë€ ë¶€ë¶„ë§Œ DOMì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ì„œ,

`#1`

```jsx
<h1 className="Greeting">Hello, Dan</h1>
```

`#2`

```jsx
<h1 className="Greeting">Hello, Yuzhi</h1>
```

`#1` â†’ `#2`ë¡œ ë°”ê¾¼ë‹¤ë©´,

ë¦¬ì•¡íŠ¸ëŠ” ë‘ ê°ì²´ë¥¼ ë¹„êµí•©ë‹ˆë‹¤.

```jsx
const oldProps = { className: "Greeting", children: "Hello, Dan" };
const newProps = { className: "Greeting", children: "Hello, Yuzhi" };
```

`children`ì€ ë°”ë€Œì–´ì„œ DOM ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•˜ì§€ë§Œ, `className`ì€ ì•„ë‹™ë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë§Œ í˜¸ì¶œë©ë‹ˆë‹¤.

```jsx
domNode.innerText = "Hello, Yuzhi";
// domNode.className ì€ ê±´ë“œë¦´ í•„ìš”ê°€ ì—†ë‹¤
```

ìœ„ì™€ ê°™ì€ ë°©ì‹ì„ effectì— ì ìš©ì‹œí‚¨ë‹¤ë©´? effectë¥¼ ì ìš©í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤.

```jsx
function Greeting({ name }) {
  const [counter, setCounter] = useState(0);
  useEffect(() => {
    document.title = "Hello, " + name;
  });
  return (
    <h1 className="Greeting">
      Hello, {name}
      <button onClick={() => setCounter(count + 1)}>Increment</button>
    </h1>
  );
}
```

í•´ë‹¹ effectì—ì„œëŠ” `counter`ì˜ ìƒíƒœê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë° `document.title`ì„ ì¹´ìš´í„° ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ ì¬í• ë‹¹í•˜ëŠ” ê²ƒì€ ì´ìƒì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

```jsx
let oldEffect = () => {
  document.title = "Hello, Dan";
};
let newEffect = () => {
  document.title = "Hello, Dan";
};
// ë¦¬ì•¡íŠ¸ê°€ ì´ ë°°ì—´ì„ ê°™ì€ ë°°ì—´ì´ë¼ê³  ì¸ì‹í•  ìˆ˜ ìˆì„ê¹Œ?
```

ë¦¬ì•¡íŠ¸ê°€ DOMê°„ ë¹„êµë¥¼ í–ˆë˜ ê²ƒì²˜ëŸ¼ effectë„ ë¹„êµë¥¼ í•˜ë©´?

â†’ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.. í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ê¹Œì§€ëŠ” í•¨ìˆ˜ê°€ ì–´ë–¤ ì¼ì„ í•˜ëŠ”ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ dependecy ë°°ì—´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤!!

```jsx
useEffect(() => {
  document.title = "Hello, " + name;
}, [name]); // ìš°ë¦¬ì˜ ì˜ì¡´ì„±
```

ì´ê±´ ë§ˆì¹˜ ìš°ë¦¬ê°€ ë¦¬ì•¡íŠ¸ì—ê²Œ â€œì´ë´, ë„¤ê°€ ì´ í•¨ìˆ˜ì˜Â *ì•ˆì„*Â ë³¼ ìˆ˜ ì—†ëŠ” ê²ƒì„ ì•Œê³  ìˆì§€ë§Œ, ëœë”ë§ ìŠ¤ì½”í”„ì—ì„œÂ `name`Â ì™¸ì˜ ê°’ì€ ì“°ì§€ ì•ŠëŠ”ë‹¤ê³  ì•½ì†í• ê²Œ.â€ ë¼ê³  ë§í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

```jsx
const oldEffect = () => {
  document.title = "Hello, Dan";
};
const oldDeps = ["Dan"];
const newEffect = () => {
  document.title = "Hello, Dan";
};
const newDeps = ["Dan"];
// ë¦¬ì•¡íŠ¸ëŠ” í•¨ìˆ˜ ì•ˆì„ ì‚´í´ë³¼ ìˆ˜ ì—†ì§€ë§Œ, depsë¥¼ ë¹„êµí•  ìˆ˜ ìˆë‹¤.
// ëª¨ë“  depsê°€ ê°™ìœ¼ë¯€ë¡œ, ìƒˆ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ë‹¤.
```

ëœë”ë§ ì‚¬ì´ì— ì˜ì¡´ì„± ë°°ì—´ ì•ˆì— ìˆëŠ” ê°’ì´ í•˜ë‚˜ë¼ë„ ë‹¤ë¥´ë‹¤ë©´ ì´í™íŠ¸ë¥¼ ìŠ¤í‚µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëª¨ë“  ê²ƒì„ ë™ê¸°í™”í•´ì•¼ì£ !\*\*\*\*

### ë¦¬ì•¡íŠ¸ì—ê²Œ ì˜ì¡´ì„±ìœ¼ë¡œ ê±°ì§“ë§í•˜ì§€ ë§ˆë¼

depsë¥¼ ì§€ì •í•œë‹¤ë©´,Â **ì»´í¬ë„ŒíŠ¸ì— ìˆëŠ”Â *ëª¨ë“ *Â ê°’ ì¤‘ ê·¸ ì´í™íŠ¸ì— ì‚¬ìš©ë  ê°’ì€Â *ë°˜ë“œì‹œ*Â ê±°ê¸° ìˆì–´ì•¼ í•œë‹¤**ëŠ” ê²ƒì„ ê¸°ì–µí•´ ë‘ì„¸ìš”. props, state, í•¨ìˆ˜ë“¤ ë“± ì»´í¬ë„ŒíŠ¸ ì•ˆì— ìˆëŠ” ëª¨ë“  ê²ƒ ë§ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´

ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ë¡œì§ì´ ë¬´í•œ ë£¨í”„ì— ë¹ ì§ˆ ìˆ˜ë„ ìˆê³ 

ì†Œì¼“ì´ ë„ˆë¬´ ìì£¼ ë°˜ì‘í•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤..

### ì˜ì¡´ì„±ìœ¼ë¡œ ê±°ì§“ë§ì„ í•˜ë©´ ìƒê¸°ëŠ” ì¼

ë§Œì•½ depsê°€ ì´í™íŠ¸ì— ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê°’ì„ ê°€ì§€ê³  ìˆë‹¤ë©´, ë¦¬ì•¡íŠ¸ëŠ” ì–¸ì œ ë‹¤ì‹œ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•´ì•¼ í•  ì§€ ì•Œê³  ìˆìŠµë‹ˆë‹¤.

â†’ ì˜ì¡´ì„±ì„ ë¹„êµí•¨

#1.

ì˜ˆë¥¼ ë“¤ì–´ì„œ, [name]ì´ë¼ëŠ” ì˜ì¡´ì„± ë°°ì—´ì„ ë„£ì–´ë‘ë©´

ì²«ë²ˆì§¸ ë Œë” ë•ŒëŠ” ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ [â€™stellaâ€™]ì¼ ê²ƒì´ê³ 

ë‘ë²ˆì§¸ ë Œë” ë–„ ê°’ì´ ë°”ë€Œì—ˆë‹¤ë©´, [â€™chanâ€™]ì¼ ê²ƒì´ë‹¤.

ê°’ì´ ë°”ë€Œì—ˆê¸° ë•Œë¬¸ì— effectë¥¼ ì‹¤í–‰í•  ê²ƒì´ë‹¤.

#2.

í•˜ì§€ë§Œ ì˜ì¡´ì„± ë°°ì—´ì´ []ì´ì—ˆë‹¤ë©´

ì²«ë²ˆì§¸ ë Œë” ë•Œ []ì´ê³ 

ë‘ë²ˆì¨° ë Œë” ë•Œë„ []ì¼í…Œë‹ˆê¹Œ

effectë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

ë˜ ë‹¤ë¥¸ ì˜ˆì‹œ,

ì˜ˆë¥¼ ë“¤ì–´ ë§¤ ì´ˆë§ˆë‹¤ ìˆ«ìê°€ ì˜¬ë¼ê°€ëŠ” ì¹´ìš´í„°ë¥¼ ì‘ì„±í•œë‹¤ê³  í•´ ë³´ê² ìŠµë‹ˆë‹¤. í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ê°œë…ì„ ì ìš©í–ˆì„ ë•Œ ìš°ë¦¬ì˜ ì§ê´€ì€ â€œì¸í„°ë²Œì„ í•œ ë²ˆë§Œ ì„¤ì •í•˜ê³ , í•œ ë²ˆë§Œ ì œê±°í•˜ìâ€ ê°€ ë©ë‹ˆë‹¤.

ë¼ëŠ” ìƒê°ìœ¼ë¡œ ì½”ë“œë¥¼ ë§Œë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  useEffect(() => {
    const id = setInterval(() => {
      setCount(count + 1);
    }, 1000);
    return () => clearInterval(id);
  }, []);
  return <h1>{count}</h1>;
}
```

ê²°ê³¼: ìˆ«ìê°€ ì˜¤ë¡œì§€ í•œ ë²ˆë§Œ ì¦ê°€í•©ë‹ˆë‹¤.

ì™œ?: countë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ì˜ì¡´ì„± ë°°ì—´ì„ []ì´ë¼ê³  ì •ì˜í•˜ë©´ì„œ ê±°ì§“ë§ì„ í–ˆìŠµë‹ˆë‹¤!

â‡’ ì²«ë²ˆì§¸ ëœë”ë§ì—ì„œ `count`ëŠ” 0ì…ë‹ˆë‹¤. ì²« ë²ˆì§¸ ëœë”ë§ì˜ effectì—ì„œ setCount(0+1)ì´ë¼ëŠ” ëœ»ì´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì˜ì¡´ì„± ë°°ì—´ì„ []ì´ë¼ê³  í–ˆê¸° ë•Œë¬¸ì— effectë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ê²°êµ­ ê·¸ë¡œ ì¸í•´ ë§¤ì´ˆë§ˆë‹¤ setCOunt(0+1)ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

â‡’ ì˜ì¡´ì„±ì´ ê°™ìœ¼ë¯€ë¡œ setCount(1+1)ì„ ìŠ¤í‚µí•´ë²„ë¦¼!!!

### ì˜ì¡´ì„±ì„ ì†”ì§í•˜ê²Œ ì ëŠ” 2ê°€ì§€ ë°©ë²•

ì²«ë²ˆì§¸ ë°©ë²• ì‹¤í–‰ í›„ ì•ˆë˜ë©´ ë‘ë²ˆì§¸ ë°©ë²• ì‚¬ìš©!

1. ì»´í¬ë„ŒíŠ¸ ì•ˆì— ìˆìœ¼ë©´ì„œ effectì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ê°’ì´ ì˜ì¡´ì„± ë°°ì—´ ì•ˆì— í¬í•¨ë˜ë„ë¡!
   - ìœ„ì˜ ì½”ë“œë¥¼ ì´ë ‡ê²Œ ê³ ì¹˜ë©´
     ```jsx
     useEffect(() => {
       const id = setInterval(() => {
         setCount(count + 1);
       }, 1000);
       return () => clearInterval(id);
     }, [count]);
     ```
     ì˜ì¡´ì„± ë°°ì—´ì´ ì˜¬ë°”ë¥´ê²Œ ë§Œë“¤ì–´ì¡ŒìŒ!
     í•˜ì§€ë§Œ,, count ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ ì¸í„°ë²Œì€ í•´ì œë˜ê³  ë‹¤ì‹œ ì„¤ì •ë  ê²ƒì„
2. effectì˜ ì½”ë“œë¥¼ ë°”ê¿”ì„œ ìš°ë¦¬ê°€ ì›í•˜ë˜ ê²ƒë³´ë‹¤ ìì£¼ ë°”ë€ŒëŠ” ê°’ì„ ìš”êµ¬í•˜ì§€ ì•Šë„ë¡ ë§Œë“œëŠ” ê²ƒ

   â†’ ì˜ì¡´ì„±ì— ëŒ€í•´ì„œ ê±°ì§“ë§í•˜ì§€ ë§ê³  ì˜ì¡´ì„±ì„ ë” ì ê²Œ ë„˜ê²¨ì£¼ë©´ ë¨!

   - ìš°ë¦¬ê°€ ë¬´ì—‡ ë•Œë¯„ì— `count`ë¥¼ ì“°ê³  ìˆë‚˜ìš”?
     â‡’ ì˜¤ë¡œì§€ `setCount`ë§Œì„ ìœ„í•´ì„œ ì‚¬ìš©ì¤‘ì…ë‹ˆë‹¤
     ê·¸ë ‡ë‹¤ë©´ í•¨ìˆ˜ í˜•íƒœì˜ ì—…ë°ì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤ë©´? í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤!
     `setCount(c => c+1)`
   - ì˜ëª»ëœ ì˜ì¡´ê´€ê³„
   - ì´ì œ effectê°€ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ì—ˆë‹¤ê³  í•˜ë”ë¼ë„ ì²« ë²ˆì§¸ ëœë”ë§ì— í¬í•¨ë˜ëŠ” ì¸í„°ë²Œ ì½œë°±ì€ ì¸í„°ë²Œì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ `c â‡’ c + 1`ì´ë¼ëŠ” ì—…ë°ì´íŠ¸ ì§€ì¹¨ì„ ì „ë‹¬í•˜ë‹ˆê¹Œ `count`ì˜ ìƒíƒœë¥¼ ì•Œ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤!
     ë¦¬ì•¡íŠ¸ê°€ ì´ë¯¸ ì•Œê³  ìˆìœ¼ë‹ˆê¹Œìš”

### í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ì™€ êµ¬ê¸€ ë‹¥ìŠ¤

ë™ê¸°í™”ì— ëŒ€í•´ ìƒê°í•  ë•Œ í¥ë¯¸ë¡œìš´ ë¶€ë¶„ì€ ì¢…ì¢… ì‹œìŠ¤í…œê°„ì˜ â€œë©”ì„¸ì§€â€ë¥¼ ìƒíƒœì™€ ì—®ì´ì§€ ì•Šì€ ì±„ë¡œ ìœ ì§€í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ êµ¬ê¸€ ë‹¥ìŠ¤ì—ì„œ ë¬¸ì„œë¥¼ í¸ì§‘í•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œ ì„œë²„ë¡œÂ *ì „ì²´*Â í˜ì´ì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì´ê² ì£ . ê·¸ ëŒ€ì‹  ì‚¬ìš©ìê°€ ë¬´ì—‡ì„ í•˜ê³ ì í–ˆëŠ”ì§€ í‘œí˜„í•œ ê²ƒì„ ë³´ëƒ…ë‹ˆë‹¤.

> ğŸ”¥ **ì˜¤ë¡œì§€ í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ ì´í™íŠ¸ ì•ˆì—ì„œ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•˜ëŠ”ê²Œ ìµœì í™”ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.**

í˜„ì¬ì˜ ì¹´ìš´íŠ¸ ê°’ì— â€œì˜¤ì—¼ë˜ì§€â€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ì € í–‰ìœ„(â€œì¦ê°€â€)ë¥¼ í‘œí˜„í•  ë¿ì…ë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ë¡œ ìƒê°í•˜ê¸° ë¬¸ì„œì—Â ìµœì†Œí•œì˜ ìƒíƒœë¥¼ ì°¾ìœ¼ë¼ëŠ”Â ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê·¸ ë¬¸ì„œì— ì“°ì¸ ê²ƒê³¼ ê°™ì€ ì›ì¹™ì´ì§€ë§Œ ì—…ë°ì´íŠ¸ì— í•´ë‹¹ëœë‹¤ê³  ìƒê°í•˜ì„¸ìš”.

ì—¬ëŸ¬ ì†ŒìŠ¤ì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ì—…ë°ì´íŠ¸ê°€ (ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, ì´í™íŠ¸ êµ¬ë… ë“±) ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ ëª¨ì—¬ì„œ ì •í™•íˆ ì ìš©ë  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

`setCount(c â‡’ c + 1)`ë„ ê·¸ë ‡ê²Œ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹™ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì„œë¡œì—ê²Œ ì˜ì¡´í•˜ëŠ” ë‘ ìƒíƒœ ê°’ì´ ìˆê±°ë‚˜ props ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ìƒíƒœë¥¼ ê³„ì‚°í•  í•„ìš”ê°€ ìˆì„ ë•Œ ë„ì›€ì´ ì•ˆë©ë‹ˆë‹¤.

ê·¸ëŸ´ ë•Œ ì‚¬ìš©í•  ë§Œí•œ ê²ƒì´ `useReducer`ì…ë‹ˆë‹¤.

### ì•¡ì…˜ì„ ì—…ë°ì´íŠ¸ë¡œë¶€í„° ë¶„ë¦¬í•˜ê¸°

ë‘ ê°€ì§€ ìƒíƒœ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œ

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  const [step, setStep] = useState(1);
  useEffect(() => {
    const id = setInterval(() => {
      setCount((c) => c + step);
    }, 1000);
    return () => clearInterval(id);
  }, [step]);
  return (
    <>
      <h1>{count}</h1>
      <input value={step} onChange={(e) => setStep(Number(e.target.value))} />
    </>
  );
}
```

â†’ `step`ì„ effect ì•ˆì—ì„œ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— dependency ë°°ì—´ì— ì¶”ê°€í•´ë’€ìŠµë‹ˆë‹¤.

â†’ `step`ì´ ë³€ê²½ë˜ë©´ ì¸í„°ë²Œì„ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.


> ğŸ”¥ effectë¥¼ ë¶„í•´í•˜ê³  ìƒˆë¡œ ì„¤ì •í•˜ëŠ”ë°ëŠ” ì•„ë¬´ ë¬¸ì œê°€ ì—†ê³ , íŠ¹ë³„íˆ ì¢‹ì€ ì´ìœ ê°€ ìˆì§€ ì•Šë‹¤ë©´ ë¶„í•´í•˜ëŠ” ê²ƒì„ í”¼í•˜ì§€ ë§ì•„ì•¼ í•©ë‹ˆë‹¤



**í•˜ì§€ë§Œ**

stepì´ ë°”ë€ë‹¤ê³  ì¸í„°ë²Œ ì‹œê³„ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šë„ë¡ í•˜ê³  ì‹¶ë‹¤ë©´? effectì˜ dependency ë°°ì—´ì—ì„œ stepì„ ì œê±°í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?

â‡’ ë‘ ìƒíƒœ ë³€ìˆ˜ ëª¨ë‘ useReducerë¡œ êµì²´í•´ì•¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`useReducer`ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¼ì–´ë‚˜ëŠ” â€œì•¡ì…˜â€ì˜ í‘œí˜„ê³¼ ê·¸ ë°˜ì‘ìœ¼ë¡œ ìƒíƒœê°€ ì–´ë–»ê²Œ ì—…ë°ì´íŠ¸ë˜ì–´ì•¼ í• ì§€ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ì„œ, ìœ„ì˜ ì½”ë“œë¥¼ effect ì•ˆì—ì„œ ì˜ì¡´ì„±ì„ dispatchë¡œ ë°”ê¿”ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
const { count, step } = state;
useEffect(() => {
  const id = setInterval(() => {
    dispatch({ type: "tick" }); // setCount(c => c + step) ëŒ€ì‹ ì—
  }, 1000);
  return () => clearInterval(id);
}, [dispatch]);
```

â‡’ **ë¦¬ì•¡íŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìœ ì§€ë˜ëŠ” í•œÂ `dispatch`Â í•¨ìˆ˜ê°€ í•­ìƒ ê°™ë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•©ë‹ˆë‹¤.**Â ë”°ë¼ì„œ ìœ„ì˜ ì˜ˆì œì—ì„œ ì¸í„°ë²Œì„ ë‹¤ì‹œ êµ¬ë…í•  í•„ìš”ì¡°ì°¨ ì—†ìŠµë‹ˆë‹¤.

(ë¦¬ì•¡íŠ¸ê°€Â `dispatch`,Â `setState`,Â `useRef`Â ì»¨í…Œì´ë„ˆ ê°’ì´ í•­ìƒ ê³ ì •ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì¥í•˜ë‹ˆê¹Œ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ëº„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ëª…ì‹œí•œë‹¤ê³  í•´ì„œ ë‚˜ì  ê²ƒì€ ì—†ìŠµë‹ˆë‹¤.)

effect ì•ˆì—ì„œ ìƒíƒœë¥¼ ì½ëŠ” ëŒ€ì‹  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ì •ë³´ë¥¼ ì¸ì½”ë”©í•˜ëŠ” **ì•¡ì…˜**ì„ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ì—¬ effectsms `step` ìƒíƒœë¡œë¶€í„° ë¶„ë¦¬ë©ë‹ˆë‹¤.

effectëŠ” ì–´ë–»ê²Œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ << **ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤**. ê·¸ë¦¬ê³  ë¦¬ë“€ì„œê°€ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ëª¨ì•„ë‘¡ë‹ˆë‹¤.

<ë¦¬ë“€ì„œ>

```jsx
const initialState = {
  count: 0,
  step: 1,
};

function reducer(state, action) {
  const { count, step } = state;
  if (action.type === "tick") {
    return { count: count + step, step };
  } else if (action.type === "step") {
    return { count, step: action.step };
  } else {
    throw new Error();
  }
}
```

### ì™œ useReducerê°€ Hooksì˜ ì¹˜íŠ¸ ëª¨ë“œì¸ê°€

ë‹¤ìŒ ìƒíƒœë¥¼ ê³„ì‚°í•˜ëŠ”ë° propsê°€ í•„ìš”í•˜ë‹¤ë©´? ì˜ˆë¥¼ ë“¤ì–´ APIê°€Â `<Count step={1} />`Â ì¸ê±°ì£ .

â‡’ í•´ê²°ë²•:

1. ì˜ì¡´ì„±ìœ¼ë¡œ props.state ì‚¬ìš©
2. ë¦¬ë“€ì„œ ê·¸ ìì²´ë¥¼ ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì •ì˜í•˜ì—¬ propsë¥¼ ì½ë„ë¡ í•˜ë©´ ë¨

   ```jsx
   function Counter({ step }) {
     const [count, dispatch] = useReducer(reducer, 0);
     function reducer(state, action) {
       if (action.type === "tick") {
         return state + step;
       } else {
         throw new Error();
       }
     }
     useEffect(() => {
       const id = setInterval(() => {
         dispatch({ type: "tick" });
       }, 1000);
       return () => clearInterval(id);
     }, [dispatch]);
     return <h1>{count}</h1>;
   }
   ```

   **ğŸš§Â ì£¼ì˜ ğŸš§**
   ì´ íŒ¨í„´ì€ ëª‡ ê°€ì§€ ìµœì •í™”ë¥¼ ë¬´íš¨í™”í•©ë‹ˆë‹¤. ì–´ë””ì„œë‚˜ ì“°ì§„ ë§ˆì„¸ìš”!!

   ë‹¤ë¥¸ ëœë”ë§ì— í¬í•¨ëœ ì´í™íŠ¸ ì•ˆì—ì„œ í˜¸ì¶œëœ ë¦¬ë“€ì„œê°€ propsë¥¼ ì•Œê³  ìˆì§€? ë‹µì€ `dispatch`ì— ìˆìŠµë‹ˆë‹¤.

   ë¦¬ì•¡íŠ¸ëŠ” ê·¸ì € ì•¡ì…˜ì„ ê¸°ì–µí•´ë†“ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒ ëœë”ë§ ì¤‘ì— ë¦¬ë“€ì„œë¥¼ í˜¸ì¶œí•  ê²ƒì…ë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ ìƒˆ propsê°€ ìŠ¤ì½”í”„ ì•ˆìœ¼ë¡œ ë“¤ì–´ì˜¤ê³  effect ë‚´ë¶€ì™€ëŠ” ìƒê´€ì´ ì—†ì–´ì§‘ë‹ˆë‹¤.

   
   > ğŸ”¥ `**useReducer`Â ë¥¼ Hooksì˜ â€œì¹˜íŠ¸ ëª¨ë“œâ€** 
   ì—…ë°ì´íŠ¸ ë¡œì§ê³¼ ê·¸ë¡œ ì¸í•´ ë¬´ì—‡ì´ ì¼ì–´ë‚˜ëŠ”ì§€ ì„œìˆ í•˜ëŠ” ê²ƒì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ê·¸ ë‹¤ìŒì€ ì´í™íŠ¸ì˜ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ì œê±°í•˜ì—¬ í•„ìš”í•  ë•Œë³´ë‹¤ ë” ìì£¼ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í”¼í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

   

### í•¨ìˆ˜ë¥¼ ì´í™íŠ¸ ì•ˆìœ¼ë¡œ ì˜®ê¸°ê¸°


> ğŸ”¥ **í•¨ìˆ˜ëŠ” ì˜ì¡´ì„±ì— í¬í•¨ë˜ë©´ ì•ˆë©ë‹ˆë‹¤.**
ê°„ë‹¨íˆ ë¡œì»¬ í•¨ìˆ˜ë¥¼ ì˜ì¡´ì„±ì—ì„œ ì œì™¸í•˜ëŠ” í•´ê²°ì±…ì€ ì»´í¬ë„ŒíŠ¸ê°€ ì»¤ì§€ë©´ì„œ ëª¨ë“  ê²½ìš°ë¥¼ ë‹¤ë£¨ê³  ìˆëŠ”ì§€ ë³´ì¥í•˜ê¸° ì•„ì£¼ í˜ë“¤ë‹¤ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤!



```jsx
function SearchResults() {
  const [query, setQuery] = useState("react");
  // ì´ í•¨ìˆ˜ê°€ ê¸¸ë‹¤ê³  ìƒìƒí•´ ë´…ì‹œë‹¤
  function getFetchUrl() {
    return "https://hn.algolia.com/api/v1/search?query=" + query;
  }
  // ì´ í•¨ìˆ˜ê°€ ê¸¸ë‹¤ê³  ìƒìƒí•´ ë´…ì‹œë‹¤
  async function fetchData() {
    const result = await axios(getFetchUrl());
    setData(result.data);
  }
  useEffect(() => {
    fetchData();
  }, []);
  // ...
}
```

ì´ëŸ° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì–´ë–¤ effectì—ì„œ depsë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ê²ƒì„ ê¹œë¹¡í–ˆë‹¤ë©´ effectëŠ” proprhk stateì˜ ë³€í™”ì— ë™ê¸°í™”í•˜ëŠ”ë° ì‹¤íŒ¨í•  ê²ƒì…ë‹ˆë‹¤.

**í•´ê²°ë²•:**

ì–´ë– í•œ í•¨ìˆ˜ë¥¼ ì´í™íŠ¸ ì•ˆì—ì„œë§Œ ì“°ë‹¤ë©´, ê·¸ í•¨ìˆ˜ë¥¼ ì§ì ‘ effect ì•ˆìœ¼ë¡œ ì˜®ê¸°ì„¸ìš”!!

```jsx
function SearchResults() {
  // ...
  useEffect(() => {
    // ì•„ê¹Œì˜ í•¨ìˆ˜ë“¤ì„ ì•ˆìœ¼ë¡œ ì˜®ê²¼ì–´ìš”!
    function getFetchUrl() {
      return "https://hn.algolia.com/api/v1/search?query=react";
    }
    async function fetchData() {
      const result = await axios(getFetchUrl());
      setData(result.data);
    }
    fetchData();
  }, []); // âœ… DepsëŠ” OK
  // ...
}
```

â‡’ **ì˜®ê²¨ì§€ëŠ” ì˜ì¡´ì„±**ì— ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

ì˜ì¡´ì„± ë°°ì—´ì€ ê±°ì§“ë§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ effect ì•ˆì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ ë²”ìœ„ ë°”ê¹¥ì— ìˆëŠ” ì–´ë–¤ ê²ƒë„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ë°”ê¹¥ì— ìˆëŠ” stateë¥¼ ì¨ì•¼í•œë‹¤ë©´, effect ì•ˆì— ìˆëŠ” í•¨ìˆ˜ë§Œ ê³ ì¹˜ê³  ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```jsx
function SearchResults() {
  const [query, setQuery] = useState("react");
  useEffect(() => {
    function getFetchUrl() {
      return "https://hn.algolia.com/api/v1/search?query=" + query;
    }
    async function fetchData() {
      const result = await axios(getFetchUrl());
      setData(result.data);
    }
    fetchData();
  }, [query]); // âœ… DepsëŠ” OK
  // ...
}
```

### í•˜ì§€ë§Œ ì´ í•¨ìˆ˜ë¥¼ ì´í™íŠ¸ ì•ˆì— ë„£ì„ ìˆ˜ ì—†ì–´ìš”

ì˜ˆë¥¼ ë“¤ì–´, í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ì´í™íŠ¸ê°€ ìˆëŠ”ë° ê°™ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ, ë¡œì§ì„ ë³µë¶™í•˜ê³  ì‹¶ì§„ ì•Šê² ì£ . ì•„ë‹ˆë©´ prop ë•Œë¬¸ì—.


> ğŸ”¥ í”í•œ ì˜¤í•´ ì¤‘ í•˜ë‚˜ê°€ â€œí•¨ìˆ˜ëŠ” ì ˆëŒ€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤â€ ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ê¸€ì„ í†µí•´ ë°°ì› ë“¯, ê·¸ ë§ì´ ì§„ì‹¤ë¡œë¶€í„° ì–¼ë§ˆë‚˜ ë©€ë¦¬ ë–¨ì–´ì ¸ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ì‚¬ì‹¤ì€, ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì •ì˜ëœ í•¨ìˆ˜ëŠ” ë§¤ ëœë”ë§ë§ˆë‹¤ ë°”ë€ë‹ˆë‹¤!**



**í•˜ì§€ë§Œ ê·¸ë¡œ ì¸í•´ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.**

ì˜ˆë¥¼ ë“¤ì–´, ë‘ effectê°€ `getFetchUrl`ì„ í˜¸ì¶œí•œë‹¤ê³  í•˜ë©´,

```jsx
function SearchResults() {
  function getFetchUrl(query) {
    return "https://hn.algolia.com/api/v1/search?query=" + query;
  }
  useEffect(() => {
    const url = getFetchUrl("react");
    // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
  }, []); // ğŸ”´ ë¹ ì§„ dep: getFetchUrl
  useEffect(() => {
    const url = getFetchUrl("redux");
    // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
  }, []); // ğŸ”´ ë¹ ì§„ dep: getFetchUrl
  // ...
}
```

â†’ `getFetchUrl`ì„ ê°ê°ì˜ effect ì•ˆìœ¼ë¡œ ì˜®ê¸°ê²Œ ë˜ë©´ ë¡œì§ì„ ê³µìœ í•  ìˆ˜ ì—†ìœ¼ë‹ˆê¹Œ ì•ˆ ì¢‹ìŒ

**í•´ê²°ì±…**

1. **ğŸ‘¿Â ì•ˆ ì¢‹ì€ ë°©ë²•**

   `getFetchUrl`ì„ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ë¹¼ë²„ë¦¬ëŠ” ê²ƒ

   â‡’ ì–¸ì œ effectì— ì˜í•´ ë‹¤ë£¨ì–´ì§ˆ í•„ìš”ê°€ ìˆëŠ” ë°ì´í„° íë¦„ì— ë³€í™”ë¥¼ ë”í•´ì•¼í• ì§€ ì•Œì•„ì°¨ë¦¬ê¸° ì–´ë ¤ì›€

2. **ğŸ˜‡Â ê´œì°®ì€ ë°©ë²•**

   1. í•¨ìˆ˜ê°€ ì»´í¬ë„ŒíŠ¸ ìŠ¤ì½”í”„ ì•ˆì˜ ì–´ë– í•œ ê²ƒë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ë¡œ ëŒì–´ì˜¬ë ¤ë‘ê³  ì´í™íŠ¸ ì•ˆì—ì„œ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

   but.. ì´í™íŠ¸ëŠ” ë‹¨ìˆœí•˜ê²Œ ë§Œë“œëŠ”ê²Œ ì¢‹ê³  ê·¸ ì•ˆì— ì½œë°±ì€ ë‘ëŠ” ê²ƒì€ ì¢‹ì§€ ì•ŠìŒ ã… 

   ```jsx
   // âœ… ë°ì´í„° íë¦„ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤
   function getFetchUrl(query) {
     return "https://hn.algolia.com/api/v1/search?query=" + query;
   }
   function SearchResults() {
     useEffect(() => {
       const url = getFetchUrl("react");
       // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
     }, []); // âœ… DepsëŠ” OK
     useEffect(() => {
       const url = getFetchUrl("redux");
       // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
     }, []); // âœ… DepsëŠ” OK
     // ...
   }
   ```

   1. `useCallback` ì‚¬ìš©

      ```jsx
      function SearchResults() {
        // âœ… ì—¬ê¸° ì •ì˜ëœ depsê°€ ê°™ë‹¤ë©´ í•­ë“±ì„±ì„ ìœ ì§€í•œë‹¤
        const getFetchUrl = useCallback((query) => {
          return "https://hn.algolia.com/api/v1/search?query=" + query;
        }, []); // âœ… ì½œë°±ì˜ depsëŠ” OK
        useEffect(() => {
          const url = getFetchUrl("react");
          // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
        }, [getFetchUrl]); // âœ… ì´í™íŠ¸ì˜ depsëŠ” OK
        useEffect(() => {
          const url = getFetchUrl("redux");
          // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
        }, [getFetchUrl]); // âœ… ì´í™íŠ¸ì˜ depsëŠ” OK
        // ...
      }
      ```

      â†’ `useCallback:`

      ì˜ì¡´ì„± ì²´í¬ì— ë ˆì´ì–´ë¥¼ í•˜ë‚˜ ë” ë”í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
      ë¬¸ì œë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ëŠ”ë°, í•¨ìˆ˜ì˜ ì˜ì¡´ì„±ì„ í”¼í•˜ê¸°ë³´ë‹¤ í•¨ìˆ˜ ìì²´ê°€ í•„ìš”í•  ë•Œë§Œ ë°”ë€” ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤.

   **ì˜ˆì‹œ1: í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ effectì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°**

   `getFetchUrl`ì„ ì‚¬ìš©í•˜ëŠ” ì–´ë–¤ effectë¼ë„ `query`ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì‹¤í–‰ë  ê²ƒì…ë‹ˆë‹¤.

   â‡’ `useCallback`Â ë•ë¶„ì—Â `query`Â ê°€ ê°™ë‹¤ë©´,Â `getFetchUrl`Â ë˜í•œ ê°™ì„ ê²ƒì´ë©°, ì´í™íŠ¸ëŠ” ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë§Œì•½Â `query`Â ê°€ ë°”ë€ë‹¤ë©´,Â `getFetchUrl`Â ë˜í•œ ë°”ë€Œë©°, ë°ì´í„°ë¥¼ ë‹¤ì‹œ í˜ì¹­í•  ê²ƒì…ë‹ˆë‹¤.

   ```jsx
   function SearchResults() {
     const [query, setQuery] = useState("react");
     // âœ… queryê°€ ë°”ë€” ë•Œê¹Œì§€ í•­ë“±ì„±ì„ ìœ ì§€í•œë‹¤
     const getFetchUrl = useCallback(() => {
       return "https://hn.algolia.com/api/v1/search?query=" + query;
     }, [query]); // âœ… ì½œë°± depsëŠ” OK
     useEffect(() => {
       const url = getFetchUrl();
       // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¬´ì–¸ê°€ë¥¼ í•œë‹¤ ...
     }, [getFetchUrl]); // âœ… ì´í™íŠ¸ì˜ depsëŠ” OK
     // ...
   }
   ```

   **ì˜ˆì‹œ2: ë¶€ëª¨ë¡œë¶€í„° í•¨ìˆ˜ propì„ ë‚´ë ¤ë³´ë‚´ëŠ” ê²½ìš°**

   ```jsx
   function Parent() {
     const [query, setQuery] = useState("react");
     // âœ… queryê°€ ë°”ë€” ë•Œê¹Œì§€ í•­ë“±ì„±ì„ ìœ ì§€í•œë‹¤
     const fetchData = useCallback(() => {
       const url = "https://hn.algolia.com/api/v1/search?query=" + query;
       // ... ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ë¦¬í„´í•œë‹¤ ...
     }, [query]); // âœ… ì½œë°± depsëŠ” OK
     return <Child fetchData={fetchData} />;
   }
   function Child({ fetchData }) {
     let [data, setData] = useState(null);
     useEffect(() => {
       fetchData().then(setData);
     }, [fetchData]); // âœ… ì´í™íŠ¸ depsëŠ” OK
     // ...
   }
   ```

   â‡’ `fetchData`Â ëŠ” ì˜¤ë¡œì§€Â `Parent`Â ì˜Â `query`Â ìƒíƒœê°€ ë°”ë€” ë•Œë§Œ ë³€í•˜ê¸° ë•Œë¬¸ì—,Â `Child`Â ì»´í¬ë„ŒíŠ¸ëŠ” ì•±ì— ê¼­ í•„ìš”í•  ë•Œê°€ ì•„ë‹ˆë¼ë©´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ í˜ì¹­í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.\*\*\*\*

### í•¨ìˆ˜ë„ ë°ì´í„° íë¦„ì˜ ì¼ë¶€ì¸ê°€?


> ğŸ”¥ **`useCallback`Â ì„ ì‚¬ìš©í•˜ë©´, í•¨ìˆ˜ëŠ” ëª…ë°±í•˜ê²Œ ë°ì´í„° íë¦„ì— í¬í•¨ë©ë‹ˆë‹¤.**Â ë§Œì•½ í•¨ìˆ˜ì˜ ì…ë ¥ê°’ì´ ë°”ë€Œë©´ í•¨ìˆ˜ ìì²´ê°€ ë°”ë€Œê³ , ë§Œì•½ ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ê°™ì€ í•¨ìˆ˜ë¡œ ë‚¨ì•„ìˆë‹¤ê³  ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



`useMemo`Â ë˜í•œ ë³µì¡í•œ ê°ì²´ì— ëŒ€í•´ ê°™ì€ ë°©ì‹ì˜ í•´ê²°ì±…ì„ ì œê³µí•©ë‹ˆë‹¤.

```jsx
function ColorPicker() {
  // colorê°€ ì§„ì§œë¡œ ë°”ë€Œì§€ ì•ŠëŠ” í•œ
  // Childì˜ ì–•ì€ props ë¹„êµë¥¼ ê¹¨íŠ¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤
  const [color, setColor] = useState("pink");
  const style = useMemo(() => ({ color }), [color]);
  return <Child style={style} />;
}
```
